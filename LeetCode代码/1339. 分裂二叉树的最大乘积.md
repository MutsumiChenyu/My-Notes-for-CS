[[Binary Tree]]
#### 我的代码

```python

class Solution:
    def maxProduct(self, root: Optional[TreeNode]) -> int:

        if not root:
            return 0
            
        HalfSum = list()

        def dfs(node):
            if not node:
                return 0
            left = dfs(node.left)
            right = dfs(node.right)
            sum = left + right + node.val
            HalfSum.append(sum)
            return sum

        Sum = dfs(root)
        n = len(HalfSum)
        Max = 0
        result = 0

        for i in range(n):
            if (Sum - HalfSum[i])*HalfSum[i] > Max:
                Max = (Sum - HalfSum[i])*HalfSum[i]

        return Max % (10**9 + 7)
```